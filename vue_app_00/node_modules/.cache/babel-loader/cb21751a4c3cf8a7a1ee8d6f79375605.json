{"remainingRequest":"C:\\xampp\\htdocs\\LL\\web1904\\gitbdck\\food1\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\LL\\web1904\\gitbdck\\food1\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\LL\\web1904\\gitbdck\\food1\\vue_app_00\\src\\views\\Buy.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\xampp\\htdocs\\LL\\web1904\\gitbdck\\food1\\vue_app_00\\src\\views\\Buy.vue","mtime":1567219842000},{"path":"C:\\xampp\\htdocs\\LL\\web1904\\gitbdck\\food1\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\xampp\\htdocs\\LL\\web1904\\gitbdck\\food1\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\xampp\\htdocs\\LL\\web1904\\gitbdck\\food1\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Myheader from \"../components/Myheader.vue\";\nimport BuyCart from \"./BuyCart.vue\";\nimport BuyTotal from \"./BuyTotal.vue\";\nimport BuyAddress from \"./BuyAddress.vue\";\nexport default {\n  data: function data() {\n    return {\n      isActive: false,\n      txtVal: 0,\n      lword: \"\",\n      list: [],\n      payMethod: {\n        firstImg: \"select\",\n        secondImg: \"notSelect-copy\"\n      },\n      ordername: \"\",\n      ordergcount: 0,\n      ordermoney: 0,\n      orderisPinkage: 0,\n      totalMoney: 0,\n      auser: \"\"\n    };\n  },\n  methods: {\n    lwordInput: function lwordInput() {\n      this.txtVal = this.lword.length;\n\n      if (this.txtVal == 30) {\n        this.isActive = true;\n      } else {\n        this.isActive = false;\n      }\n    },\n    getAuser: function getAuser(auser) {\n      this.auser = auser;\n      console.log(auser);\n    },\n    GetCartdata: function GetCartdata(data) {\n      this.data = data;\n    },\n    chooseMethods: function chooseMethods() {\n      var fileImg = this.payMethod.firstImg;\n      this.payMethod.firstImg = this.payMethod.secondImg;\n      this.payMethod.secondImg = fileImg;\n    },\n    loadCart: function loadCart() {\n      var _this = this;\n\n      var url = \"cart\";\n      this.axios.get(url).then(function (res) {\n        if (res.data.code == -1) {\n          _this.$messagebox(\"消息\", \"请登录\").then(function (res) {\n            _this.$router.push(\"/Login\");\n\n            return;\n          });\n        } else {\n          var list = res.data.data;\n          _this.list = list;\n          var ordername = \"\";\n\n          _this.list.map(function (item) {\n            ordername += item.pname + \",\";\n          });\n\n          _this.ordername = ordername;\n          var ordergcount = 0;\n\n          _this.list.map(function (item) {\n            ordergcount += parseInt(item.gcount);\n          });\n\n          _this.ordergcount = ordergcount;\n          var ordermoney = 0;\n\n          _this.list.map(function (item) {\n            ordermoney += parseInt(item.money);\n          });\n\n          _this.ordermoney = ordermoney;\n          var orderisPinkage = 0;\n\n          _this.list.map(function (item) {\n            orderisPinkage += parseInt(item.isPinkage);\n          });\n\n          _this.orderisPinkage = orderisPinkage;\n\n          _this.getTotalMoney();\n        }\n      });\n    },\n    complete: function complete(ordername, ordergcount, ordermoney, orderisPinkage) {\n      var _this2 = this;\n\n      var auser = this.auser;\n      var tmoney = this.totalMoney;\n      console.log(tmoney);\n      var url = \"addorder\";\n      var objs = {\n        auser: auser,\n        gcount: ordergcount,\n        pname: ordername,\n        money: ordermoney,\n        tmoney: tmoney\n      };\n      console.log(objs);\n      this.axios.get(url, {\n        params: objs\n      }).then(function (res) {\n        if (res.data.code == -1) {\n          _this2.$toast(\"请登录\");\n\n          _this2.$router.push(\"/Login\");\n\n          return;\n        } else {\n          _this2.$toast(\"结算成功\");\n\n          _this2.$router.push(\"/MyOrder\");\n        }\n      });\n    },\n    getTotalMoney: function getTotalMoney() {\n      var _this3 = this;\n\n      this.list.map(function (item) {\n        _this3.totalMoney += item.pprice;\n      });\n      this.list.map(function (item) {\n        if (item.isPinkage == 0) {\n          _this3.totalMoney += 6;\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.loadCart();\n  },\n  components: {\n    \"BuyCart\": BuyCart,\n    \"BuyTotal\": BuyTotal,\n    \"BuyAddress\": BuyAddress,\n    \"myheader\": Myheader\n  }\n};",{"version":3,"sources":["Buy.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div class=\"app_Buy\">\r\n<BuyCart></BuyCart>\r\n  <div style=\"height:150px;\">\r\n      <div class=\"leaveWord\">\r\n          <textarea name=\"leaveWord\" placeholder=\"买家留言\" maxlength=\"30\" @input=\"lwordInput\" v-model=\"lword\"/>\r\n          <div class=\"limitWord\" v-bind:class=\"{active: isActive}\">{{txtVal}}/30</div>\r\n      </div>\r\n  </div>\r\n    <BuyAddress @getAphone=\"getAuser\"></BuyAddress>\r\n  <BuyTotal @Cartdata=\"GetCartdata\"></BuyTotal>\r\n  <div class=\"content\" style=\"height:90px;border-bottom:none;\">\r\n     <div class=\"pay-method\" @click=\"chooseMethods\"> \r\n        <img src=\"../../public/images/weixin.jpg\">\r\n        <svg class=\"icon\" aria-hidden=\"true\" style=\"display:inline-block;width:30px;height:30px;\">\r\n        <use :xlink:href=\"'#icon-'+payMethod.firstImg\"></use>\r\n        </svg>        \r\n     </div>\r\n     <div class=\"pay-method\" style=\"display:block;\" @click=\"chooseMethods\"> \r\n        <img src=\"../../public/images/zhifubao.jpg\">\r\n        <svg class=\"icon\" aria-hidden=\"true\" style=\"display:inline-block;width:30px;height:30px;\">\r\n        <use :xlink:href=\"'#icon-'+payMethod.secondImg\"></use>\r\n        </svg>        \r\n     </div>\r\n  </div>\r\n   <div v-for=\"(item,i) of list\" :key=\"i\" style=\"display:none;\"></div>\r\n  <div class=\"content\" style=\"height:60px;justify-content: space-between;flex-flow:row wrap;bottom:0;border-top:2px solid #e9e7e8;z-index:999;background-color:#ffffff;\">\r\n      <span style=\"display:inl-block;color:#ff7100;\">&#12288;合计:&#12288;{{totalMoney}}</span>\r\n      <mt-button type=\"danger\" size=\"small\" style=\"background-color:#ff7100;width:100px;\" @click=\"complete(ordername,ordergcount,ordermoney,orderisPinkage)\">去付款</mt-button>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Myheader from \"../components/Myheader.vue\"\r\nimport BuyCart from \"./BuyCart.vue\"\r\nimport BuyTotal from \"./BuyTotal.vue\"\r\nimport BuyAddress from \"./BuyAddress.vue\"\r\nexport default {\r\n    data() {\r\n        return {\r\n            isActive: false,\r\n            txtVal:0,\r\n            lword:\"\",\r\n            list:[],\r\n            payMethod:{firstImg:\"select\",secondImg:\"notSelect-copy\"},\r\n            ordername:\"\",\r\n            ordergcount:0,\r\n            ordermoney:0,\r\n            orderisPinkage:0,\r\n            totalMoney:0,\r\n            auser:\"\"\r\n        }\r\n    },\r\n    methods:{\r\n        lwordInput(){\r\n             this.txtVal = this.lword.length;\r\n             if(this.txtVal==30){\r\n                    this.isActive = true;\r\n             }else{\r\n                    this.isActive = false;\r\n             }\r\n        },\r\n       getAuser(auser){\r\n           this.auser=auser;\r\n           console.log(auser);\r\n       },\r\n        GetCartdata(data){\r\n            this.data=data;\r\n        },\r\n        chooseMethods(){\r\n            var fileImg=this.payMethod.firstImg;\r\n            this.payMethod.firstImg= this.payMethod.secondImg;\r\n            this.payMethod.secondImg= fileImg;\r\n        },\r\n        loadCart(){\r\n           var url=\"cart\";\r\n           this.axios.get(url).then(res=>{\r\n               if(res.data.code==-1){\r\n                   this.$messagebox(\"消息\",\"请登录\").then(res=>{\r\n                       this.$router.push(\"/Login\");\r\n                       return;\r\n                   })\r\n               }else{\r\n                  var list=res.data.data;\r\n                   this.list=list;\r\n                   var ordername=\"\";\r\n                    this.list.map((item) => {ordername += item.pname+\",\"});\r\n                    this.ordername=ordername;\r\n                    var ordergcount=0;\r\n                    this.list.map((item) => {ordergcount += parseInt(item.gcount)});\r\n                     this.ordergcount=ordergcount;\r\n                    var ordermoney=0;\r\n                     this.list.map((item) => {ordermoney += parseInt(item.money)});\r\n                      this.ordermoney=ordermoney;\r\n                    var orderisPinkage=0;\r\n                     this.list.map((item) => {orderisPinkage += parseInt(item.isPinkage)});\r\n                      this.orderisPinkage=orderisPinkage;\r\n                      this.getTotalMoney();\r\n               }\r\n           })\r\n         },\r\n         complete(ordername,ordergcount,ordermoney,orderisPinkage){\r\n            var auser=this.auser;\r\n            var tmoney=this.totalMoney;\r\n            console.log(tmoney);\r\n            var url=\"addorder\";\r\n            var objs={auser:auser,gcount:ordergcount,pname:ordername,money:ordermoney,tmoney:tmoney};\r\n             console.log(objs);\r\n            this.axios.get(url,{params:objs}).then(res=>{\r\n            if(res.data.code==-1){\r\n                    this.$toast(\"请登录\");\r\n                    this.$router.push(\"/Login\");\r\n                    return;\r\n                    }else{this.$toast(\"结算成功\");\r\n                     this.$router.push(\"/MyOrder\");\r\n            }\r\n            })\r\n        },\r\n        getTotalMoney(){\r\n            this.list.map((item) => {this.totalMoney += item.pprice;});\r\n             this.list.map((item) => {\r\n                if(item.isPinkage==0){\r\n                    this.totalMoney+=6; \r\n                }\r\n        })\r\n        }\r\n        },\r\n         created() {\r\n        this.loadCart();\r\n         },\r\n        components:{\r\n        \"BuyCart\":BuyCart,\r\n        \"BuyTotal\":BuyTotal,\r\n        \"BuyAddress\":BuyAddress,\r\n        \"myheader\":Myheader\r\n    },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.app_Buy{\r\n    font-size: 16px;\r\n}\r\n.app_Buy>div{\r\n    width: 100%;\r\n    height:100%;\r\n    padding-top: 15px;\r\n    border-bottom: 2px solid #e9e7e8;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-flow:column wrap;\r\n}\r\n.app_Buy>div>div{\r\n    width: 90%;\r\n    /* margin: 0 auto;  */\r\n}\r\n.leaveWord{\r\n    height: 100%;\r\n}\r\n.leaveWord textarea{\r\n    display: block;\r\n    width: 90%;\r\n    height: 80%;\r\n    line-height:30px;\r\n    margin: 0 auto;\r\n    background-color: #e9e7e8;\r\n    border: none;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n}\r\n.leaveWord div{\r\n      width: 90%;\r\n      height: 15%;\r\n        margin: 0 auto;\r\n        background-color: #e9e7e8;\r\n}\r\n.limitWord{\r\n    text-align: right;\r\n    font-size: 12px;\r\n}\r\n.content{\r\n    padding: 0 !important;\r\n}\r\n.active{\r\n    color: #f15a0c;\r\n}\r\n.pay-method{\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n.pay-method img{\r\n     height: 35px;\r\n    float: left;\r\n}\r\n.pay-method svg{\r\n     float: right;\r\n}\r\n</style>"],"sourceRoot":"src\\views"}]}