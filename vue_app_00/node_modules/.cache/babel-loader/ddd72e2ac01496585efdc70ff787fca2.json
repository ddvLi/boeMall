{"remainingRequest":"D:\\web1904\\个人项目\\boeMall\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!D:\\web1904\\个人项目\\boeMall\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\web1904\\个人项目\\boeMall\\vue_app_00\\src\\components\\Car.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\web1904\\个人项目\\boeMall\\vue_app_00\\src\\components\\Car.vue","mtime":1569067326979},{"path":"D:\\web1904\\个人项目\\boeMall\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"D:\\web1904\\个人项目\\boeMall\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"D:\\web1904\\个人项目\\boeMall\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Caritem from \"./Caritem.vue\";\nexport default {\n  data: function data() {\n    return {\n      uid: \"\",\n      gid: \"\",\n      carNone_dp: \"\",\n      carHas_dp: \"\",\n      gcount: \"\",\n      selcount: 0,\n      totalCount: 0,\n      list_car: [],\n      list_count: [],\n      xzAll_dp: \"yc\",\n      wxzAll_dp: \"xs_in\",\n      money: 0,\n      deleteBtn_dp: \"\",\n      carJs_dp: \"\",\n      wancheng_dp: \"yc\",\n      bianji_dp: \"xs\",\n      hjText_dp: \"\",\n      redWord_dp: \"\",\n      checkStatus: \"\",\n      selData: \"\",\n      check: false\n    };\n  },\n  methods: {\n    delCar: function delCar() {\n      var _this = this;\n\n      var obj = {\n        uid: this.uid\n      };\n      this.axios.delete(\"delCar\", {\n        params: obj\n      }).then(function (res) {\n        if (res.data.code == 1) {\n          _this.onload();\n        } else {\n          _this.$toast({\n            message: \"请选择商品\",\n            position: \"middle\"\n          });\n        }\n      });\n    },\n    getSeldata: function getSeldata() {\n      var _this2 = this;\n\n      var obj = {\n        uid: this.uid\n      };\n      this.axios.get(\"selData\", {\n        params: obj\n      }).then(function (res) {\n        if (res.data.code == 1) {\n          _this2.selData = res.data.data;\n\n          for (var i = 0, csum = 0, psum = 0; i < res.data.data.length; i++) {\n            csum += res.data.data[i].gcount;\n            psum += res.data.data[i].gcount * res.data.data[i].gprice;\n          }\n\n          _this2.selcount = csum;\n          _this2.money = psum;\n        } else {\n          _this2.selcount = 0;\n          _this2.money = 0;\n        }\n      });\n    },\n    notSelected: function notSelected(gid) {\n      var _this3 = this;\n\n      var obj = {\n        uid: this.uid,\n        gid: gid,\n        gchecked: 0\n      };\n      var url = \"select\";\n      this.axios.put(url, this.qs.stringify(obj)).then(function (res) {\n        if (res.data.code == 1) {\n          _this3.getSeldata();\n        }\n      });\n    },\n    selected: function selected(gid) {\n      var _this4 = this;\n\n      var obj = {\n        uid: this.uid,\n        gid: gid,\n        gchecked: 1\n      };\n      var url = \"select\";\n      this.axios.put(url, this.qs.stringify(obj)).then(function (res) {\n        if (res.data.code == 1) {\n          _this4.getSeldata();\n        }\n      });\n    },\n    allSel: function allSel() {\n      var _this5 = this;\n\n      this.xzAll_dp = \"xs_in\";\n      this.wxzAll_dp = \"yc\";\n      this.checkStatus = true;\n      var obj = {\n        uid: this.uid,\n        gchecked: 1\n      };\n      var url = \"allSelect\";\n      this.axios.put(url, this.qs.stringify(obj)).then(function (res) {\n        _this5.getSeldata();\n      });\n    },\n    allNosel: function allNosel() {\n      var _this6 = this;\n\n      this.xzAll_dp = \"yc\";\n      this.wxzAll_dp = \"xs_in\";\n      this.checkStatus = false;\n      var obj = {\n        uid: this.uid,\n        gchecked: 0\n      };\n      var url = \"allSelect\";\n      this.axios.put(url, this.qs.stringify(obj)).then(function (res) {\n        _this6.getSeldata();\n      });\n    },\n    addCount: function addCount(gcount, gid, dpid) {\n      var _this7 = this;\n\n      if (dpid == 1 && gcount < 6) {\n        gcount++;\n        var obj = {\n          uid: this.uid,\n          gcount: gcount,\n          gid: gid\n        };\n        var url = \"updateCar\";\n        this.axios.put(url, this.qs.stringify(obj)).then(function (res) {\n          if (res.data.code == 1) {\n            _this7.onload();\n\n            _this7.getSeldata();\n          } else {\n            _this7.onload();\n\n            _this7.getSeldata();\n          }\n        });\n      } else if (dpid !== 1 && gcount < 3) {\n        gcount++;\n        var obj = {\n          uid: this.uid,\n          gcount: gcount,\n          gid: gid\n        };\n        var url = \"updateCar\";\n        this.axios.put(url, this.qs.stringify(obj)).then(function (res) {\n          if (res.data.code == 1) {\n            _this7.onload();\n\n            _this7.getSeldata();\n          } else {\n            _this7.onload();\n\n            _this7.getSeldata();\n          }\n        });\n      } else {\n        this.$toast({\n          message: \"不能再加啦~\",\n          position: \"middle\"\n        });\n      }\n    },\n    subCount: function subCount(gcount, gid, dpid) {\n      var _this8 = this;\n\n      if (gcount == 1) {\n        this.$toast({\n          message: \"不能再少啦~\",\n          position: \"middle\"\n        });\n      } else {\n        gcount--;\n        var obj = {\n          uid: this.uid,\n          gcount: gcount,\n          gid: gid,\n          dpid: dpid\n        };\n        var url = \"updateCar\";\n        this.axios.put(url, this.qs.stringify(obj)).then(function (res) {\n          if (res.data.code == 1) {\n            _this8.onload();\n\n            _this8.getSeldata();\n          } else {\n            _this8.onload();\n\n            _this8.getSeldata();\n          }\n        });\n      }\n    },\n    wancheng: function wancheng() {\n      this.bianji_dp = \"xs\";\n      this.wancheng_dp = \"yc\";\n      this.deleteBtn_dp = \"yc_z\";\n      this.carJs_dp = \"xs_z\";\n      this.hjText_dp = \"xs_in\";\n      this.redWord_dp = \"xs_in\";\n      this.allNosel();\n      this.bus.$emit(\"check\", this.check);\n    },\n    bianji: function bianji() {\n      this.bianji_dp = \"yc\";\n      this.wancheng_dp = \"xs\";\n      this.deleteBtn_dp = \"xs_z\";\n      this.carJs_dp = \"yc_z\";\n      this.hjText_dp = \"yc\";\n      this.redWord_dp = \"yc\";\n      this.allNosel();\n      this.bus.$emit(\"check\", this.check);\n    },\n    goback: function goback() {\n      this.allNosel();\n      this.$router.go(-1);\n    },\n    onload: function onload() {\n      var _this9 = this;\n\n      this.uid = this.$route.params.uid;\n      var obj = {\n        uid: this.uid\n      };\n      this.axios.get(\"car\", {\n        params: obj\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          _this9.carNone_dp = \"xs\";\n          _this9.carHas_dp = \"yc\";\n        } else {\n          _this9.carNone_dp = \"yc\";\n          _this9.carHas_dp = \"xs\";\n          _this9.totalCount = 0;\n\n          for (var i = 0, obj = {}, arr = []; i < res.data.carCount.length; i++) {\n            _this9.totalCount += res.data.carCount[i].gcount;\n            obj = Object.assign(res.data.carText[i], res.data.carCount[i]);\n            arr.push(obj);\n          }\n\n          _this9.list_car = arr;\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.onload();\n  },\n  components: {\n    \"caritem\": Caritem\n  },\n  watch: {\n    selData: function selData() {\n      if (this.selData.length === this.list_car.length) {\n        this.xzAll_dp = \"xs_in\";\n        this.wxzAll_dp = \"yc\";\n      } else {\n        this.xzAll_dp = \"yc\";\n        this.wxzAll_dp = \"xs_in\";\n      }\n    }\n  }\n};",{"version":3,"sources":["Car.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"car\">\r\n    <div class=\"carTop\">\r\n      <div class=\"fhjt\">\r\n        <img @click=\"goback\" src=\"../../public/images/dtfh.png\" alt=\"\">\r\n      </div>\r\n      <span class=\"carNum\">购物车{{selcount}}/{{totalCount}}</span>\r\n      <span class=\"toggle\" :class=\"bianji_dp\" @click=\"bianji\">编辑</span>\r\n      <span class=\"toggle\" :class=\"wancheng_dp\" @click=\"wancheng\">完成</span>\r\n    </div>\r\n    <div class=\"carNone\" :class=\"carNone_dp\">\r\n      <div class=\"none\">\r\n        <div class=\"img\">\r\n          <img src=\"../../public/images/kgwc.png\" alt=\"\">\r\n        </div>\r\n        <div class=\"not-content\">购物车内暂无商品</div>\r\n      </div>\r\n      <div class=\"content-search\">\r\n        <div class=\"gap\"></div>\r\n        <div class=\"all-search\">大家都在搜</div>\r\n        <div class=\"search-item\">\r\n          <span>BOE画屏</span>\r\n          <span>原木色</span>\r\n          <span>红木色</span>\r\n        </div>  \r\n      </div>\r\n    </div>\r\n    <div class=\"carHas\" :class=\"carHas_dp\">\r\n      <div class=\"gapTop\"></div>\r\n      <div class=\"carMid\">\r\n        <caritem :taskImg=\"item_car.gpic\" v-for=\"(item_car, index) of list_car\" :key=\"index\" :taskCount=\"item_car.gcount\" @add=\"addCount(item_car.gcount,item_car.gid,item_car.dpid)\" @sub=\"subCount(item_car.gcount,item_car.gid,item_car.dpid)\" :checkStatus=\"checkStatus\" @sel=\"selected(item_car.gid)\" @nsel=\"notSelected(item_car.gid)\">\r\n          <template slot=\"taskName\">{{item_car.gname}}</template>\r\n          <template slot=\"taskType1\">{{item_car.gtype}}</template>\r\n          <template slot=\"taskType2\">{{item_car.gtype}}</template>\r\n          <template slot=\"taskPrice\">{{item_car.gprice}}</template>\r\n        </caritem>\r\n      </div>\r\n      <div class=\"carBottom\">\r\n        <div class=\"all\">\r\n          <span class=\"iconfont icon-Oval allwxz\" :class=\"wxzAll_dp\"  @click=\"allSel\"></span>\r\n          <span class=\"iconfont icon-Groupx13 allxz\" :class=\"xzAll_dp\" @click=\"allNosel\"></span>\r\n          <span class=\"allText\">全选</span>\r\n        </div>\r\n        <div class=\"carJs\" :class=\"carJs_dp\">\r\n          <span class=\"hjText\" :class=\"hjText_dp\">合计：</span>\r\n          <span class=\"redWord\" :class=\"redWord_dp\">￥{{money}}.00</span>\r\n          <div class=\"jsCount\">结算({{selcount}})</div>\r\n        </div>\r\n        <div class=\"deleteBtn\" :class=\"deleteBtn_dp\" @click=\"delCar\">删除</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Caritem from \"./Caritem.vue\"\r\nexport default {\r\n  data(){\r\n    return {\r\n      uid:\"\",\r\n      gid:\"\",\r\n      carNone_dp:\"\",\r\n      carHas_dp:\"\",\r\n      gcount:\"\",\r\n      selcount:0,\r\n      totalCount:0,\r\n      list_car:[],\r\n      list_count:[],\r\n      xzAll_dp:\"yc\",\r\n      wxzAll_dp:\"xs_in\",\r\n      money:0,\r\n      deleteBtn_dp:\"\",\r\n      carJs_dp:\"\",\r\n      wancheng_dp:\"yc\",\r\n      bianji_dp:\"xs\",\r\n      hjText_dp:\"\",\r\n      redWord_dp:\"\",\r\n      checkStatus:\"\",\r\n      selData:\"\",\r\n      check:false\r\n    }\r\n  },\r\n  methods:{\r\n    delCar(){\r\n      var obj={uid:this.uid};\r\n      this.axios.delete(\"delCar\",{params:obj}).then(res=>{\r\n        if(res.data.code==1){\r\n          this.onload(); \r\n        }else{\r\n          this.$toast({message:\"请选择商品\",position:\"middle\"});\r\n        }\r\n      })\r\n    },\r\n    getSeldata(){\r\n      var obj={uid:this.uid};\r\n      this.axios.get(\"selData\",{params:obj}).then(res=>{\r\n        if(res.data.code==1){\r\n          this.selData=res.data.data\r\n          for(var i=0,csum=0,psum=0;i<res.data.data.length;i++){\r\n            csum+=res.data.data[i].gcount;\r\n            psum+=res.data.data[i].gcount*res.data.data[i].gprice;\r\n          }\r\n          this.selcount=csum;\r\n          this.money=psum;\r\n        }else{\r\n          this.selcount=0;\r\n          this.money=0\r\n        }\r\n      })\r\n    },\r\n    notSelected(gid){\r\n      var obj={uid:this.uid,gid,gchecked:0}\r\n      var url=\"select\"\r\n      this.axios.put(url,this.qs.stringify(obj)).then(res=>{\r\n        if(res.data.code==1){\r\n          this.getSeldata()\r\n        }\r\n      }) \r\n    },\r\n    selected(gid){\r\n      var obj={uid:this.uid,gid,gchecked:1}\r\n      var url=\"select\"\r\n      this.axios.put(url,this.qs.stringify(obj)).then(res=>{\r\n        if(res.data.code==1){\r\n          this.getSeldata();\r\n        }\r\n      })\r\n    },\r\n    allSel(){\r\n      this.xzAll_dp=\"xs_in\";\r\n      this.wxzAll_dp=\"yc\";\r\n      this.checkStatus=true;\r\n      var obj={uid:this.uid,gchecked:1};\r\n      var url=\"allSelect\";\r\n      this.axios.put(url,this.qs.stringify(obj)).then(res=>{\r\n        this.getSeldata();\r\n      })\r\n    },\r\n    allNosel(){\r\n      this.xzAll_dp=\"yc\";\r\n      this.wxzAll_dp=\"xs_in\";\r\n      this.checkStatus=false;\r\n      var obj={uid:this.uid,gchecked:0};\r\n      var url=\"allSelect\";\r\n      this.axios.put(url,this.qs.stringify(obj)).then(res=>{\r\n        this.getSeldata();\r\n      })\r\n    },\r\n    addCount(gcount,gid,dpid){\r\n      if(dpid==1 && gcount<6){\r\n        gcount++;\r\n        var obj={uid:this.uid,gcount,gid};\r\n        var url=\"updateCar\";\r\n        this.axios.put(url,this.qs.stringify(obj)).then(res=>{\r\n          if(res.data.code==1){\r\n            this.onload();\r\n            this.getSeldata();\r\n          }else{\r\n            this.onload();\r\n            this.getSeldata();\r\n          }\r\n        })\r\n      }else if(dpid!==1 && gcount<3){\r\n        gcount++;\r\n        var obj={uid:this.uid,gcount,gid};\r\n        var url=\"updateCar\";\r\n        this.axios.put(url,this.qs.stringify(obj)).then(res=>{\r\n          if(res.data.code==1){\r\n            this.onload();\r\n            this.getSeldata();\r\n          }else{\r\n            this.onload();\r\n            this.getSeldata();\r\n          }\r\n        })\r\n      }else{\r\n        this.$toast({message:\"不能再加啦~\",position:\"middle\"});\r\n      }\r\n    },\r\n    subCount(gcount,gid,dpid){\r\n      if(gcount==1){\r\n        this.$toast({message:\"不能再少啦~\",position:\"middle\"});     \r\n      }else{\r\n        gcount--\r\n        var obj={uid:this.uid,gcount,gid,dpid}\r\n        var url=\"updateCar\";\r\n        this.axios.put(url,this.qs.stringify(obj)).then(res=>{\r\n           if(res.data.code==1){\r\n            this.onload();\r\n            this.getSeldata();\r\n          }else{\r\n            this.onload();\r\n            this.getSeldata();\r\n          }\r\n        })\r\n      }\r\n    },\r\n    wancheng(){\r\n      this.bianji_dp=\"xs\";\r\n      this.wancheng_dp=\"yc\"\r\n      this.deleteBtn_dp=\"yc_z\";\r\n      this.carJs_dp=\"xs_z\";\r\n      this.hjText_dp=\"xs_in\";\r\n      this.redWord_dp=\"xs_in\";\r\n      this.allNosel();\r\n      this.bus.$emit(\"check\",this.check)\r\n    },\r\n    bianji(){\r\n      this.bianji_dp=\"yc\";\r\n      this.wancheng_dp=\"xs\"\r\n      this.deleteBtn_dp=\"xs_z\"\r\n      this.carJs_dp=\"yc_z\";\r\n      this.hjText_dp=\"yc\";\r\n      this.redWord_dp=\"yc\";\r\n      this.allNosel();\r\n      this.bus.$emit(\"check\",this.check)\r\n    },\r\n    goback(){\r\n      this.allNosel();\r\n      this.$router.go(-1);\r\n    },\r\n    onload(){\r\n      this.uid=this.$route.params.uid;\r\n      var obj={uid:this.uid};\r\n      this.axios.get(\"car\",{params:obj}).then(res=>{\r\n        if(res.data.code==0){\r\n          this.carNone_dp=\"xs\";\r\n          this.carHas_dp=\"yc\";        \r\n        }else{\r\n          this.carNone_dp=\"yc\";\r\n          this.carHas_dp=\"xs\";\r\n          this.totalCount=0;\r\n          for(var i=0,obj={},arr=[];i<res.data.carCount.length;i++){\r\n            this.totalCount+=res.data.carCount[i].gcount;\r\n            obj=Object.assign(res.data.carText[i],res.data.carCount[i])\r\n            arr.push(obj);\r\n          }\r\n          this.list_car=arr;\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.onload();\r\n  },\r\n  components: {\r\n    \"caritem\":Caritem\r\n  },\r\n  watch:{\r\n    selData(){\r\n      if(this.selData.length===this.list_car.length){\r\n        this.xzAll_dp=\"xs_in\";\r\n        this.wxzAll_dp=\"yc\";\r\n      }else{\r\n        this.xzAll_dp=\"yc\";\r\n        this.wxzAll_dp=\"xs_in\";\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n*{box-sizing: border-box}\r\n#car .xs_z{\r\n  z-index: 2 !important;\r\n}\r\n#car .yc_z{\r\n  z-index: 1 !important;\r\n}\r\n#car .fhjt,#car .fhjt>img{\r\n  line-height: 55.97px;\r\n  vertical-align: middle;\r\n}\r\n#car .jsCount{\r\n  width: 150px;\r\n  height: 40px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: #ED6054;\r\n  font-size: 18px;\r\n  color: #fff;\r\n}\r\n#car .redWord{\r\n  font-size:18px;\r\n  color: #ED6054;\r\n  margin-right: 15px;\r\n  font-weight: bold;\r\n}\r\n\r\n#car .hjText{\r\n  font-size: 12px;\r\n  color: #333;\r\n}\r\n#car .deleteBtn{\r\n  width: 150px;\r\n  height: 40px;;\r\n  display: flex;\r\n  background: #000;\r\n  color: #fff;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 18px;\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  z-index: 1;\r\n}\r\n#car .carJs{\r\n  display: flex;\r\n  align-items: center;\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  z-index: 2\r\n}\r\n#car .allxz{\r\n  font-size: 16px;\r\n}\r\n#car .allwxz{\r\n  font-size: 16px;\r\n  color: #9A9A9A;\r\n}\r\n#car .allText{\r\n  margin-left: 10px;\r\n}\r\n#car .all{\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 12px;\r\n  color: #333;\r\n}\r\n#car .carNum{\r\n  color:#333334;\r\n  font-size: 20px;\r\n  margin-right: 120px\r\n}\r\n#car .toggle{\r\n  color:#333334;\r\n  font-size: 14px;\r\n}\r\n#car .carTop{\r\n  width: 100%;\r\n  height: 55.98px;\r\n  padding: 0 17.5px 0 18px;\r\n  top: 0px;\r\n  position: fixed;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background: #fff;\r\n  z-index: 2\r\n}\r\n#car .gapTop{\r\n  width: 100%;\r\n  height: 10px;\r\n  background: #F6F5FB;\r\n  position: fixed;\r\n  top:55px;\r\n}\r\n#car .carMid{\r\n  margin-top: 64px;\r\n}\r\n#car .carBottom{\r\n  width: 100%;\r\n  height: 40px;\r\n  padding-left: 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: fixed;\r\n  bottom: 0;\r\n  background: #fff;\r\n  z-index: 2;\r\n}\r\n#car .carHas{\r\n  width: 100%;\r\n}\r\n#car .xs_in{\r\n  display: inline-block !important;\r\n}\r\n#car .xs{\r\n  display: block !important;\r\n}\r\n#car .yc{\r\n   display: none !important;\r\n}\r\n#car .search-item>span{\r\n  background: #F6F6F6;\r\n  border-radius: 15px;\r\n  height: 26.5px;\r\n  font-size:12px;\r\n  display: inline-block;\r\n  padding: 3.75px 7.5px;\r\n  margin-top:  10px;\r\n  margin-right: 10px;\r\n}\r\n#car .search-item{\r\n  width: 357.5px;\r\n  height: 36.5px;\r\n  margin-left: 17.5px;\r\n}\r\n#car .all-search{\r\n  width: 357.5px;\r\n  height: 22px;\r\n  margin-left: 17.5px;\r\n  margin-top: 20px;\r\n  font-size:14px;\r\n  color:#333;\r\n}\r\n#car .gap{\r\n  width: 100%;\r\n  height: 10px;\r\n  background: #F6F5FB;\r\n}\r\n#car .content-search{\r\n  padding-bottom: 20px\r\n}\r\n#car .img{\r\n  width: 43.98px;\r\n  height: 56.14px;\r\n  margin: 0 auto 10px;\r\n}\r\n#car .img>img{\r\n  width: 43.98px;\r\n  height: 56.14px;\r\n  line-height: 56.14px;\r\n  position: absolute;\r\n  z-index: 5;\r\n}\r\n#car .not-content{\r\n  width: 100%;\r\n  height: 22px;\r\n  color: #999;\r\n  font-size:14px;\r\n  margin-bottom: 22px;\r\n  text-align: center;\r\n  line-height: 22px;\r\n}\r\n#car .none{\r\n  padding-top: 80px;\r\n}\r\n#car .carNone{\r\n  width: 100%;\r\n  height: 667px;\r\n  background: #fff;\r\n} \r\n</style>"],"sourceRoot":"src\\components"}]}